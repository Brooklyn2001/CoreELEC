From 212d273dfc8ba6fb023e6e2f0f1c3fd830723585 Mon Sep 17 00:00:00 2001
From: Radostan Riedel <raybuntu@googlemail.com>
Date: Wed, 21 Nov 2018 20:56:36 +0100
Subject: [PATCH] CEC: Fix Regs for log and phy addr

---
 drivers/amlogic/cec/hdmi_ao_cec.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/drivers/amlogic/cec/hdmi_ao_cec.c b/drivers/amlogic/cec/hdmi_ao_cec.c
index d9deabb17bf..2830644c921 100644
--- a/drivers/amlogic/cec/hdmi_ao_cec.c
+++ b/drivers/amlogic/cec/hdmi_ao_cec.c
@@ -949,9 +949,9 @@ unsigned int cec_phyaddr_config(unsigned int value, bool wr_flag)
 unsigned int cec_logicaddr_config(unsigned int value, bool wr_flag)
 {
 	if (wr_flag)
-		cec_set_reg_bits(AO_DEBUG_REG3, value, 0, 8);
+		cec_set_reg_bits(AO_DEBUG_REG1, value, 0, 8);
 
-	return readl(cec_dev->cec_reg + AO_DEBUG_REG3);
+	return readl(cec_dev->cec_reg + AO_DEBUG_REG1);
 }
 
 void cec_keep_reset(void)
@@ -2133,6 +2133,7 @@ static long hdmitx_cec_ioctl(struct file *f,
 	case CEC_IOC_ADD_LOGICAL_ADDR:
 		tmp = arg & 0xf;
 		CEC_INFO("CEC LA ARG:%ld", arg);
+		cec_logicaddr_config(tmp, 1);
 		cec_logicaddr_set(tmp);
 		/* add by hal, to init some data structure */
 		cec_dev->cec_info.log_addr = tmp;
